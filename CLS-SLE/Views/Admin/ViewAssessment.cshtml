@using CLS_SLE.Models;
@{
    ViewBag.Title = "View Assessment";
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">@Html.ActionLink("Admin Dashboard", "AdminDashboard")</li>
        <li class="breadcrumb-item">@Html.ActionLink("Assessments", "Assessments")</li>
        <li class="breadcrumb-item active" aria-current="page">View Assesmment - @Model.assessment.Name </li>
    </ol>
</nav>
<h1> @Model.assessment.Name </h1>
<br />
<div class="py-1">
    <b>Category:</b> @Model.assessment.Category
</div>
<div class="py-1">
    Description: @Model.assessment.Description
</div>
<div class="py-1">
    Pass Rate: @(Model.assessment.OutcomePassRate * 100)%
</div>
<div>
    Calculate Pass Rate: @Model.assessment.CalculateOutcomePassRate
</div>
<div class="py-1">
    Program: @Model.program
</div>
<div class="py-1">
    Is Active: @Model.assessment.IsActive
</div>
@if (Model.ModifierLogin != null)
{
    <div class="py-1">
        Last Modified:  @Model.assessment.ModifiedDateTime
    </div>
    <div class="py-1">
        By: @Model.ModifierLogin
    </div>
}
else if (Model.CreatorLogin != null)
{
    <div class="py-1">
        Created: @Model.assessment.CreatedDateTime
    </div>
    <div class="py-1">
        By: @Model.CreatorLogin
    </div>
}



<div>
    @*@{ if (Model.canEdit)
            {
                @Html.ActionLink("Edit Assessment", "EditAssessment", new { Model.assessment.AssessmentID })
                }
        }*@

    @Html.ActionLink("Edit Assessment", "EditAssessment", new { Model.assessment.AssessmentID })

    @*@{
            if (Model.canAdd)
            {
                @Html.ActionLink("Add Assessment", "AddAssessment", new { Model.assessment.AssessmentID })
            }
        }*@
</div>

<div>
    <table class="table table-hover table-striped">
        <thead class="thead-dark">
            <tr>
                <th class="col">Rubric</th>
                
                <th class="col"><a href="~/Rubric/AddRubric?assessmentID=@Model.assessment.AssessmentID"><button type="button" class="btn btn-primary mr-2">Add New</button></a></th>
            </tr>
        </thead>
        <tbody>
            @{ foreach (RubricAssessment rubricAssessment in Model.assessment.RubricAssessments)
                {
                    AssessmentRubric assessmentRubric = rubricAssessment.AssessmentRubric;

                    <tr data-userID="person.PersonID">
                        <td>@assessmentRubric.Name</td>
                        
                        <td class="text-right"><a href="~/Rubric/ViewRubric?rubricID=@assessmentRubric.RubricID"><button type="button" class="btn btn-primary mr-2">View</button></a></td>
                    </tr>
                }
            }

        </tbody>
    </table>
</div>