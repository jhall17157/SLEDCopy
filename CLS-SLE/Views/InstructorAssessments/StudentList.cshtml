@using CLS_SLE.Models;
@{
    ViewBag.Title = "Students";
    var a = Model.Assessment;
    var totalCriteria = Model.TotalCriteria;
    var totalScoredFilled = (List<int>)Session["totalScoredFilled"];
    var x = 0;
}

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item">@Html.ActionLink("Dashboard", "Dashboard", new { p = Session["personID"] })</li>
        <li class="breadcrumb-item active" aria-current="page">Student List</li>
    </ol>
</nav>

<h1>@a.AssessmentName</h1>
<h2 style="text-align:center">@a.RubricName</h2>
<span class="badge">CRN# </span>@a.CRN <span class="right badge">@a.CourseName</span>

<table class="table table-hover">
    <thead class="thead-dark">
        <tr>
            <th>Student ID</th>
            <th>Name</th>
            <th style="text-align: center">Progress</th>
        </tr>
    </thead>
    <tbody id="students">
        @foreach (SectionEnrollment student in Model.Students)
        {
            <tr data-section="@student.sectionID" data-enrollment="@student.EnrollmentID" id="@student.EnrollmentID" class="student-row">
                <td style="width: 120px;">@student.StudentID</td>
                <td>@student.LastName, @student.FirstName</td>
                <td style="width: 100px; text-align: center"> <span class="badge">@totalScoredFilled[x] / @totalCriteria</span></td>
            </tr>
            x++;
        }
    </tbody>
</table>

@section scripts
{
    <script>
        $(function () {
            $('#students').on('click', '.student-row', function () {
                location.href = "/InstructorAssessments/Assessment?sectionID=" + this.dataset.section + "&enrollmentID=" + this.dataset.enrollment;
            });
        })
    </script>
}
